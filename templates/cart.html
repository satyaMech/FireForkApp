<!DOCTYPE html>
<html>
<head>
    <title>Your Cart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
            
    <link rel="stylesheet" href="{{url_for('static', filename='cart.css')}}">
</head>
<body>
    <div class="top-bar d-flex flex-row">
       <div class="back-arrow" onclick="window.history.back()">
            <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M15 8a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 0 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 7.5H14.5A.5.5 0 0 1 15 8z"/>
            </svg>
        </div>
        <img src="https://as2.ftcdn.net/jpg/02/82/76/39/1000_F_282763972_xKMyYads8XYGamLEhNGHQOAKT9Eyo9Dc.jpg" class="fire-fork-logo" />
        <p class="cart-title">Fire Fork restaurant</p>
        <P class="help">Help</P>
        <P class="sign-in">Sign In</P>        
    </div>
    {% if cart_items %}
        <div class="container">
             <div class="d-flex flex-column justify-content-center cart-bgcontainer mt-1">
                <div class= "shadow bill-card-container p-3">
                    {% for item in cart_items %}
                        <div class="d-flex flex-row">
                            <p class="item-name">{{ item.name }}</p>
                            <form action="{{ url_for('update_quantity') }}" method="POST" class="d-inline-flex align-items-center border rounded px-2 py-1">
                                <input type="hidden" name="item_name" value="{{ item.name }}">
                                <input type="hidden" name="item_price" value="{{ item.price }}">
                                
                                <button type="submit" name="action" value="decrease" class="btn btn-link text-muted p-0 m-0" style="text-decoration:none; font-size: 1.2rem;">−</button>
                                <span class="mx-3 fw-bold text-success">{{ item.quantity }}</span>
                                <button type="submit" name="action" value="increase" class="btn btn-link text-success p-0 m-0" style="text-decoration:none; font-size: 1.2rem;">+</button>
                            </form>
                            <p class="item-price">₹{{ (item.price | int) * (item.quantity | int) }}</p> 
                        </div>
                        
                    {% endfor %}
                    <hr class="item-divider">
                    <p class="pay-heading">Bill Details</p>
                    <div class="d-flex justify-content-between">
                        <span class="pay-item">Item Total</span>
                        <span class="pay-item">₹ {{ total}}</span>
                    </div>
                    <div class="mb-0 d-flex justify-content-between">
                        <span class="pay-item">GST</span>
                        <span class="pay-item">₹ {{gst}}</span>
                    </div>
                    <div class="d-flex justify-content-between">
                        <span class="pay-item">Restaurant Charges</span>
                        <span class="pay-item">₹ {{restaruant_charges}}</span>
                    </div>
                    <hr>                 
                </div>
                <div class="shadow pay-card p-3" style="max-height: 80vh; overflow-y: auto; position: sticky; top: 80px; border-radius: 15px;">
                    <div class="d-flex justify-content-between fw-bold fs-5 text-success">
                        <span>Total Payable</span>
                        <span>₹ {{ "%.2f"|format(total + gst + restaruant_charges) }}</span>
                    </div>
                    <div class="text-center mt-4">
                        <form action="{{ url_for('checkout')}}" method="post">
                            <button type="submit" class="btn btn-primary btn-lg px-4">
                                Proceed to Place Order
                            </button>
                        </form>
                    </div>
                </div>
            </div>

        </div>
           
    {% else %}
        <div class="d-flex flex-column justify-content-center cart-bgcontainer">
            <img class = "empty-logo" src="https://chatgpt.com/backend-api/estuary/public_content/enc/eyJpZCI6Im1fNjkwOWM0YjFlMDE0ODE5MWJkNWI5Mzg3ZWQzOWUyM2Q6ZmlsZV8wMDAwMDAwMDE5YzQ3MjA5OWE1MmFmMTk5MThhMTgwMyIsInRzIjoiMjAzOTYiLCJwIjoicHlpIiwiY2lkIjoiMSIsInNpZyI6ImJhNDY0NDI0ZjhlM2Y2NjEzNDFmMzEzNWNiNzlmMzZiN2IwY2VkNTQ3ODRjNmExMjc1ZmYyYjJjYjY1OWQ4NzMiLCJ2IjoiMCIsImdpem1vX2lkIjpudWxsLCJjcCI6bnVsbCwibWEiOm51bGx9"/>
            <h1 class="empty-title">Your cart is Empty</h1>
            <p class="empty-description">You can go to home page. Add something from the menu</p>
            <button type="button" class="empty-button" onclick="window.location.href='{{ url_for('home') }}'">GO TO HOME PAGE</button>
        </div>
    {% endif %}
    
</body>
</html> 
